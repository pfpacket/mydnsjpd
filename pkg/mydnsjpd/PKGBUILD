# Maintainer: Ryo Munakata <afpacket@gmail.com>
pkgname=mydnsjpd
pkgver=1.0.0
pkgrel=2
pkgdesc="DNS record updater for MyDNS.jp"
arch=('i686' 'x86_64')
license=('GPL2')
depends=('make' 'gcc>=4.6.0' 'git')
install=mydnsjpd.install
source=('mydnsjpd.service')
md5sums=('2d601c4a9e44e0122f4cc016332ed714')

# mydnsjpd git repo
mydnsjpd_git="https://github.com/pfpacket/mydnsjpd.git"
# Your Boost C++ libraries' path
boost_root="/usr"

build()
{
    git clone "${mydnsjpd_git}"
    cd mydnsjpd/
    make BOOST_ROOT="${boost_root}"
}

package()
{
    cd ${srcdir}/mydnsjpd/
    mkdir -p "${pkgdir}/etc/"
    mkdir -p "${pkgdir}/usr/bin/"
    mkdir -p "${pkgdir}/usr/lib/systemd/system/"
    install -D -m600 ./mydnsjpd.conf "${pkgdir}/etc/mydnsjpd.conf"
    install -D -m755 ./mydnsjpd "${pkgdir}/usr/bin/mydnsjpd"
    install -D -m644 "${srcdir}/mydnsjpd.service" "${pkgdir}/usr/lib/systemd/system/"
}
